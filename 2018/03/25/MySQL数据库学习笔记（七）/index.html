<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>MySQL学习笔记（七）：变量、触发器、函数及流程控制 | 程序人生</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
    <meta name="keywords" content="Kenshine,Kenshine's Blog" />
  
  <meta name="description" content="0.学习准备 学习资料参考书籍《深入浅出MySQL数据库开发、优化与管理维护》参考视频《传智播客MySQL》  系统函数部分及补充部分参考书本其余部分参考视频  建表准备：创建订单表与货物表并添加数据 -- 创建商品表 CREATE TABLE m_goods( id INT PRIMARY KEY auto_increment, name VARCHAR(20) NOT NULL, price">
<meta name="keywords" content="MySQL">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL学习笔记（七）：变量、触发器、函数及流程控制">
<meta property="og:url" content="https://zjxkenshine.github.io/2018/03/25/MySQL数据库学习笔记（七）/index.html">
<meta property="og:site_name" content="程序人生">
<meta property="og:description" content="0.学习准备 学习资料参考书籍《深入浅出MySQL数据库开发、优化与管理维护》参考视频《传智播客MySQL》  系统函数部分及补充部分参考书本其余部分参考视频  建表准备：创建订单表与货物表并添加数据 -- 创建商品表 CREATE TABLE m_goods( id INT PRIMARY KEY auto_increment, name VARCHAR(20) NOT NULL, price">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-01.jpg">
<meta property="og:image" content="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-02.jpg">
<meta property="og:image" content="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-03.jpg">
<meta property="og:image" content="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-04.jpg">
<meta property="og:image" content="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-05.jpg">
<meta property="og:image" content="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-06.jpg">
<meta property="og:image" content="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-07.jpg">
<meta property="og:image" content="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-08.jpg">
<meta property="og:image" content="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-09.jpg">
<meta property="og:image" content="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-10-1.jpg">
<meta property="og:image" content="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-11.jpg">
<meta property="og:image" content="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-12.jpg">
<meta property="og:image" content="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-13-1.jpg">
<meta property="og:image" content="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-14.jpg">
<meta property="og:image" content="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-15.jpg">
<meta property="og:image" content="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-16.jpg">
<meta property="og:image" content="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-17.jpg">
<meta property="og:image" content="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-18.jpg">
<meta property="og:image" content="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-19.jpg">
<meta property="og:image" content="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-20.jpg">
<meta property="og:image" content="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-20-0.jpg">
<meta property="og:image" content="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-21.jpg">
<meta property="og:image" content="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-22.jpg">
<meta property="og:image" content="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-23.jpg">
<meta property="og:image" content="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-24.jpg">
<meta property="og:image" content="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-25.jpg">
<meta property="og:image" content="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-26.jpg">
<meta property="og:image" content="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-27.jpg">
<meta property="og:image" content="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-28-2.jpg">
<meta property="og:image" content="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-29.jpg">
<meta property="og:image" content="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-30.jpg">
<meta property="og:updated_time" content="2018-04-05T05:56:17.743Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="MySQL学习笔记（七）：变量、触发器、函数及流程控制">
<meta name="twitter:description" content="0.学习准备 学习资料参考书籍《深入浅出MySQL数据库开发、优化与管理维护》参考视频《传智播客MySQL》  系统函数部分及补充部分参考书本其余部分参考视频  建表准备：创建订单表与货物表并添加数据 -- 创建商品表 CREATE TABLE m_goods( id INT PRIMARY KEY auto_increment, name VARCHAR(20) NOT NULL, price">
<meta name="twitter:image" content="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-01.jpg">
  
  
    <link rel="icon" href="/favicon.ico">
  
  <link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css">
  <script src="/js/pace.min.js"></script>
  

  
  

</head>

<body>
  <div id="container">
      <header id="header">
    <div id="banner"></div>
    <div id="header-outer">
        <div id="header-menu" class="header-menu-pos animated">
            <div class="header-menu-container">
                <a href="/" class="left">
                    <span class="site-title">Kenshine&#39;s Blog</span>
                </a>
                <nav id="header-menu-nav" class="right">
                    
                    <a  href="/">
                        <i class="fa fa-home"></i>
                        <span>首页</span>
                    </a>
                    
                    <a  href="/archives">
                        <i class="fa fa-archive"></i>
                        <span>归档</span>
                    </a>
                    
                    <a target="_blank" href="/about">
                        <i class="fa fa-user"></i>
                        <span>关于</span>
                    </a>
                    
                </nav>
                <a class="mobile-header-menu-button">
                    <i class="fa fa-bars"></i>
                </a>
            </div>
        </div>
        <div id="header-row">
            <div id="logo">
                <a href="/">
                    <img src="/images/logo.png" alt="logo">
                </a>
            </div>
            <div class="header-info">
                <div id="header-title">
                    
                    <h2>
                        Kenshine&#39;s Blog
                    </h2>
                    
                </div>
                <div id="header-description">
                    
                    <h3>
                        今天,是你余生的第一天
                    </h3>
                    
                </div>
            </div>
            <nav class="header-nav">
                <div class="social">
                    
                        <a title="Github" target="_blank" href="//github.com/zjxkenshine">
                            <i class="fa fa-github fa-2x"></i></a>
                    
                        <a title="Weibo" target="_blank" href="//weibo.com/3807155334">
                            <i class="fa fa-weibo fa-2x"></i></a>
                    
                        <a title="Qq" target="_blank" href="/images/qq1754294529.jpg">
                            <i class="fa fa-qq fa-2x"></i></a>
                    
                        <a title="Weixin" target="_blank" href="/images/weixin-kenshine.png">
                            <i class="fa fa-weixin fa-2x"></i></a>
                    
                </div>
            </nav>
        </div>
    </div>
</header>
      <div class="outer">
        <section id="main" class="body-wrap"><article id="post-MySQL数据库学习笔记（七）" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 class="post-title" itemprop="name">
      MySQL学习笔记（七）：变量、触发器、函数及流程控制
    </h1>
    <div class="post-title-bar">
      <ul>
          
              <li>
                  <i class="fa fa-book"></i>
                  
                      <a href="/categories/数据库/">数据库</a>
                  
              </li>
          
        <li>
          <i class="fa fa-calendar"></i>  2018-03-25
        </li>
        <li>
          <i class="fa fa-eye"></i>
          <span id="busuanzi_value_page_pv"></span>
        </li>
      </ul>
    </div>
  

          
      </header>
    
    <div class="article-entry post-content" itemprop="articleBody">
      
            
            <h2 id="0-学习准备"><a href="#0-学习准备" class="headerlink" title="0.学习准备"></a>0.学习准备</h2><ol>
<li>学习资料<br>参考书籍《深入浅出MySQL数据库开发、优化与管理维护》<br>参考视频《传智播客MySQL》</li>
</ol>
<p>系统函数部分及补充部分参考书本<br>其余部分参考视频</p>
<ol>
<li><p>建表准备：创建订单表与货物表并添加数据</p>
<pre><code>-- 创建商品表
CREATE TABLE m_goods(
id INT PRIMARY KEY auto_increment,
name VARCHAR(20) NOT NULL,
price DECIMAL(10,2) DEFAULT 1,
inv INT COMMENT &apos;库存容量&apos;
)CHARSET utf8;
-- 添加商品
INSERT INTO m_goods VALUES(NULL,&apos;iphone100&apos;,5288,100),(NULL,&apos;iphone20&apos;,60000,200);

-- 创建订单表
CREATE TABLE m_order(
id int PRIMARY KEY auto_increment,
g_id int NOT NULL COMMENT &apos;商品Id&apos;,
g_number int COMMENT &apos;商品数量&apos;
)CHARSET utf8;
</code></pre></li>
</ol>
<hr>
<h2 id="1-变量"><a href="#1-变量" class="headerlink" title="1.变量"></a>1.变量</h2><p>变量分为两种：<br>系统变量和自定义变量。<br><strong>1)系统变量：</strong></p>
<ol>
<li>系统定义好的变量，大部分的时候用户根本不需要改变系统变量。<br>系统变量时控制服务器的表现的：<br>如：autocommit,auto_increment,engine,字符集，校对集等</li>
<li>查看系统变量:<ul>
<li>查看所有系统变量：<br>  Show variables;<br>发现有超级多的系统变量：<br><img src="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-01.jpg" alt=""><br>（警告可以使<code>show warings</code>查看）</li>
<li>查看具体的变量值：<br>  select @@变量名； – 加@@才能查看系统变量<br>任何一个有数据返回的内容都需要用select来查看。<br><img src="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-02.jpg" alt=""></li>
</ul>
</li>
<li>修改系统变量:分为两种–会话级别和全局级别<br>– 会话级别:当前客户端当次连接有效（两种方式）：<pre><code>set 变量名=值；
</code></pre>或者：<pre><code>set @@变量名=值；
</code></pre>– 全局级别:一次修改，永久有效：<pre><code>set globle 变量名 = 值；
</code></pre></li>
<li>如果其他客户端意见连上了服务器，那么当次修改无效。<br>需要退出重新登录才会生效。</li>
<li>除非有需求要改变系统特征，否则一般情况不会使用系统变量。</li>
</ol>
<p><strong>2)自定义变量：</strong></p>
<ol>
<li>定义变量：<br>系统为了区分系统变量和自定义变量，规定用户自定义变量必须使用一个@来赋值。<pre><code>set @变量名 = 值；
</code></pre>如：<pre><code>-- 定义自定义变量
SET @name=&apos;kenshine&apos;;
</code></pre></li>
<li>查看自定义变量名：<pre><code>select @变量名；
</code></pre>注意：如果不加@则会被当做是查字段。<pre><code>-- 查询自定义变量
SELECT @name;
</code></pre><img src="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-03.jpg" alt=""></li>
<li>注意：<br>mysql中的<code>=</code>经常被用来当做比较符号，所以mysql又重新定义了一个赋值符号：<br><code>:=</code><br>定义变量与查看变量可以这样使用：<pre><code>SET @name :=&apos;kenshine&apos;;
SELECT @name;
</code></pre></li>
</ol>
<p><strong>3)从数据表中获取数据赋值给变量：</strong></p>
<ol>
<li>Mysql允许从数据表中或获取数据然后赋值给变量:有两种方式</li>
<li>第一种方式：<br>变赋值边查看结果：<pre><code>Select @变量名 :=字段名[,字段名...] from 表名；
</code></pre>此时如果用<code>=</code>就会被解析成比较符号，所以一定得用<code>=</code>。<br>如：<br> SELECT @name = name FROM m_stu1;<br> SELECT @name := name FROM m_stu1;<br><img src="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-04.jpg" alt=""><br>但是这种方式赋值一次值获取最后一条记录，通常不使用这种方式赋值。</li>
<li>第二种方案：<br>只有赋值，不会输出结果。<br>但是要求很严格：数据库或取数据只能获取一条，因为Mysql不支持数组。<pre><code>select 字段1[,字段2...] from 表名 [where...] into @变量名1[@变量名2...] 
</code></pre>可以同时给多个变量赋值，但是只能在查询出一条的情况下赋值，否则会报错:<pre><code>SELECT name,classid FROM m_stu1 WHERE id = 4 INTO @name,@classid;
SELECT @name,@classid;
</code></pre><img src="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-05.jpg" alt=""></li>
<li>注意：<br><strong>所有的自定义变量都是会话级别的。</strong><br>所有的自定义变量都不区分数据库。（用户级别）<br>关于局部变量的声明赋值等查看后面的笔记：自定义函数及函数的操作</li>
</ol>
<hr>
<h2 id="2-触发器"><a href="#2-触发器" class="headerlink" title="2.触发器"></a>2.触发器</h2><p>使用情景：<br>有两张表，一张订单表，一张商品表，每生成一笔订单，商品库存需要对应减少。<br><strong>1)触发器简介：</strong></p>
<ol>
<li>简介：<br>trigger,事先为某张表绑定好一段代码，当表中的内容发生改变时（增删改），系统会自动触发器代码，执行。</li>
<li>触发器的基本组成：<strong>事件类型，触发时间，触发对象</strong><br>事件类型：三种类型，增删改，Insert,delete和update;<br>触发时间：前后，before和after;<br>触发对象：表中的每一条记录（针对行）。</li>
<li><strong>一张表最多拥有一种触发时间的一种触发类型的触发器，也就是一张表最多能有6个触发器。</strong></li>
</ol>
<p><strong>2)创建触发器：</strong></p>
<ol>
<li>注意：<br>在mysql高级结构中没有大括号（的语法），所以创建触发器时不能用括号，只能用Beign和End代替括号。</li>
<li>创建语法：<pre><code>-- 临时修改语句结束符
Delimiter 自定义结束符（假设为$$）
Create trigger 触发器名字 触发时间 事件类型 on 表名 for each row Begin 
    -- 触发器事件（内容），每行都以;结束。
End 自定义结束符($$)
-- 将语句结束符改回；
Delimiter ;
</code></pre></li>
<li>给订单表创建触发器：<pre><code>delimiter $$
CREATE TRIGGER aftig AFTER INSERT ON m_order FOR EACH ROW 
BEGIN 
    -- 触发器内容(有问题需要改进)
    UPDATE m_goods SET inv=inv-1 WHERE id=2;
END 
$$
delimiter ;
</code></pre><img src="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-06.jpg" alt=""></li>
</ol>
<p><strong>3)查看触发器：</strong></p>
<ol>
<li>两种方式：查看所有触发器或者模糊匹配<pre><code>Show triggers [like &apos;...&apos;];
</code></pre></li>
<li>测试：<br><img src="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-07.jpg" alt=""><br>可以使用\G参数使结构变的清楚一点：<br><img src="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-08.jpg" alt=""></li>
<li>查看触发器创建语句：<pre><code>show create trigger 触发器名字；
</code></pre>如：<pre><code>SHOW CREATE TRIGGER aftig;
</code></pre><img src="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-09.jpg" alt=""></li>
<li>所有的触发器都被保存在一张表中：<code>Information_schema.triggers</code><br>所以可以通过查询该系统表查看触发器:<pre><code>SELECT * FROM Information_schema.triggers;
</code></pre><img src="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-10-1.jpg" alt=""></li>
</ol>
<p><strong>4)使用触发器：</strong></p>
<ol>
<li>不需要手动调用，而是某种情况发生时会自动调用</li>
<li>上述的触发器内容是：<pre><code>UPDATE m_goods SET inv=inv-1 WHERE id=2;
</code></pre>当订单购买了两个商品1时：<pre><code>INSERT INTO m_order values(NULL,1,2);
</code></pre>执行并查询商品表：<br><img src="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-11.jpg" alt=""><br>发现商品二被修改，且只减少了一个。但是触发器的确工作了。<br>说明触发器并不合理；（后面会解决）</li>
<li>千万不要在触发器内容中修改同一个表，否则会陷入死循环。</li>
</ol>
<p><strong>5)删除触发器：</strong></p>
<ol>
<li>触发器不能修改，只能先删除后新增。</li>
<li>删除触发器的语法：<pre><code>drop trigger 触发器名字；
</code></pre>测试：<pre><code>DROP TRIGGER aftig;
</code></pre>此时再添加订单不会有商品减少。</li>
</ol>
<p><strong>6）上述问题的解决:触发器记录</strong></p>
<ol>
<li>触发器记录：<br>不管触发器是否触发了，只要某种操作准备执行，系统就会将当前要操作的记录的当前状态和即将执行后的新状态分别保留下来供触发器使用，其中当前状态保存在old中，操作之后的可能形态保存给new.(触发器查看中有)</li>
<li>old代表的是旧记录，new代表的是新记录：<br>–删除的时候是没有new的，插入的时候是没有old的。</li>
<li>使用方式：<pre><code>old.字段名  /  new.字段名;
</code></pre></li>
<li>修改触发器内容：<pre><code>Begin
    UPDATE m_goods SET inv=inv-new.g_number WHERE id=new.g_id;
End
</code></pre></li>
<li>测试：<br><img src="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-12.jpg" alt=""><br>能正确处理。</li>
</ol>
<hr>
<h2 id="3-代码执行结构"><a href="#3-代码执行结构" class="headerlink" title="3.代码执行结构"></a>3.代码执行结构</h2><p>顺序结构，分支结构，循环结构<br><strong>1)分支：if</strong></p>
<ol>
<li>按照条件选择性执行某段代码：<br>在mysql中只有if分支。</li>
<li>分支语法：<pre><code>if 条件判断 then
    -- 满足条件的代码
else
    -- 不满足条件的代码
end if;
</code></pre></li>
<li>触发器结合分支：<br>商品库存够：生成订单；不够：不生成订单；<pre><code>delimiter $$
CREATE TRIGGER beftig BEFORE INSERT ON m_order FOR EACH ROW
BEGIN 
        -- 判断库存是否足够
        -- 获取商品库存
        SELECT inv FROM m_goods WHERE id=new.g_id INTO @inv;
        -- 比较库存
        if @inv&lt;new.g_number THEN
        -- 库存不足：mysql没有提供阻止触发器事件发生的方法，只能暴力停止
                INSERT INTO xxxx VALUES (xxxx);
        end IF;
END 
$$
CREATE TRIGGER aftig AFTER INSERT ON m_order FOR EACH ROW 
BEGIN 
            -- 触发器内容
            UPDATE m_goods SET inv=inv-new.g_number WHERE id=new.g_id;
END 
$$
delimiter ;
</code></pre>测试：<pre><code>Insert into m_order values(null,1,100000);
</code></pre><img src="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-13-1.jpg" alt=""></li>
</ol>
<p><strong>2)循环结构：while</strong></p>
<ol>
<li>代码在指定条件之下重复循环：常用while语法</li>
<li>语法：<pre><code>While 条件判断 do
    -- 满足条件要执行的代码
    -- 变更循环条件
End while;
</code></pre></li>
<li>循环控制：<br>在循环内部进行循环判断和控制<br>Mysql中没有continue和break，但是有相似的;<br>Iterate:迭代，类似continue<br>Leave：离开，类似break，整个循环结束<br>用法：<pre><code>Iterate/Leave 循环名字
</code></pre>所以需要定义循环名字：<pre><code>循环名字：While 条件判断 do
    -- 循环体
    -- 循环控制
    Iterate/Leave 循环名字
End while [循环名];
</code></pre></li>
<li>循环不适合在触发器中使用。<br>配合函数食用效果更佳<br>所以等学完函数再补充</li>
</ol>
<hr>
<h2 id="4-函数及系统函数"><a href="#4-函数及系统函数" class="headerlink" title="4.函数及系统函数"></a>4.函数及系统函数</h2><p><strong>1)函数简介:</strong></p>
<ol>
<li>函数：将一段代码封装到一个结构中，需要执行代码块的时候调用结构执行即可。（代码复用）<br>所有函数都不区分大小写，系统函数最好用大写。</li>
<li>函数分为两类：<br>系统函数，自定义函数</li>
<li>系统函数：<br>系统定义好的函数，直接调用即可。<br>任何函数都必须要有返回值，所以可以通过select来查看调用。</li>
</ol>
<p><strong>2)字符串系统函数：</strong></p>
<ol>
<li>常用的字符串系统函数：<ul>
<li>concat(S1,S2…Sn)：连接S1到Sn为一个字符串</li>
<li>insert(str,x,y,instr)：将字符串str从第x位置开始，y个字符长的字符串替换为instr</li>
<li>lower/upper(str)：将字符串str变为小写/大写。</li>
<li>left/right(str,x)：返回字符串str最左/右边x个字符。</li>
<li>lpad/rpad(str,n,pad)：用字符串pad对str的最左边/最右边进行填充，直到字符串长度为n。</li>
<li>ltrim/rtrim(str)：去掉字符串最左边/右边的空格。</li>
<li>trim(str)：去掉行头和行尾的空格</li>
<li>repeat(str,x)：返回str重复x次的结果。</li>
<li>replace(str,a,b)：将str中所有的字符串a用b代替。</li>
<li>strcmp(a,b)：比较字符串a和b。</li>
<li>substring(str,x,y)：返回从x位置起y个字符长度的字符串。</li>
<li>char_length/length(str)：返回字符串长度。</li>
<li>INSTR(STR,SUBSTR) 在一个字符串(STR)中搜索指定的字符(SUBSTR),返回第一个发现指定的字符的位置(INDEX); </li>
</ul>
</li>
<li>测试第一组方法：<pre><code>SELECT CONCAT(&apos;aaa&apos;,&apos;bbb&apos;),CONCAT(&apos;aaa&apos;,NULL),INSERT(&apos;shabi&apos;,4,2,&apos;diao&apos;);
SELECT LOWER(&apos;HAHA&apos;),UPPER(&apos;haha&apos;),UPPER(NULL);
SELECT LEFT(&apos;12345678&apos;,3),LEFT(&apos;12345678&apos;,NULL),RIGHT(&apos;12345678&apos;,3);
</code></pre>测试结果（注意为null的情况）：<br><img src="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-14.jpg" alt=""></li>
<li>测试第二组方法：<pre><code>SELECT LPAD(&apos;123&apos;,10,&apos;6&apos;),LPAD(&apos;123&apos;,10,NULL),RPAD(&apos;123&apos;,10,&apos;6&apos;);
SELECT LTRIM(&apos;      haha&apos;),RTRIM(&apos;haha     &apos;);
SELECT REPEAT(&apos;a&apos;,5),REPLACE(&apos;666666&apos;,&apos;6&apos;,&apos;7&apos;);
</code></pre>测试结果：<br><img src="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-15.jpg" alt=""></li>
<li>测试第三组方法：<pre><code>SELECT STRCMP(&apos;a&apos;,&apos;b&apos;),STRCMP(&apos;a&apos;,null),STRCMP(&apos;a&apos;,&apos;a&apos;),STRCMP(&apos;b&apos;,&apos;a&apos;);
SELECT SUBSTRING(&apos;12345678910&apos;,3,5);
SELECT LENGTH(&apos;123456&apos;),CHAR_LENGTH(&apos;123456&apos;);
</code></pre>测试结果：<br><img src="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-16.jpg" alt=""><br>注意：sql的下标是从1开始的。</li>
</ol>
<p><strong>3)数值系统函数：</strong></p>
<ol>
<li>常用的数值函数：<ul>
<li>ABS(x)：返回x的绝对值。</li>
<li>FLOOR/CEIL(x)：向下取整。</li>
<li>MOD(x,y)：返回x/y的值。</li>
<li>RAND()：返回0-1之内的随机值。</li>
<li>ROUND(x,y)：返回x四舍五入后带有y位小数的值。</li>
<li>truncate(x,y)：返回数字x截断为y位小数的结果。</li>
</ul>
</li>
<li>函数测试1：<pre><code>SELECT ABS(-0.8),ABS(0.8);
SELECT CEIL(-0.8),CEIL(0.8),FLOOR(-0.8),FLOOR(0.8);
SELECT RAND(),FLOOR(RAND()),CEIL(RAND());
</code></pre>测试结果：<br><img src="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-17.jpg" alt=""><br>可以通过Rand()取到任意范围内的随机数。</li>
<li>函数测试2：<pre><code>SELECT MOD(1,3),MOD(0,3),MOD(3,0),MOD(null,3),MOD(3,NULL);
SELECT ROUND(1,2),ROUND(1.6,2),ROUND(1.66666,2),ROUND(1.4);
SELECT TRUNCATE(1.66666,2),TRUNCATE(1.66666,0);
</code></pre>测试结果：<br><img src="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-18.jpg" alt=""><br>MOD相当于%，任何人一个参数为null返回值都为null;<br>truncate和round的最大区别就是一个会四舍五入一个人只是截断。</li>
</ol>
<p><strong>4)时间与日期函数：</strong></p>
<ol>
<li>常用日期与时间函数：<ul>
<li>curdate()/curtime()：返回当前日期/时间</li>
<li>now()：返回当前的日期和时间</li>
<li>unix_timestamp(date)：返回日期date的unix时间戳</li>
<li>from_unixtime(…）：返回unix时间戳的日期值</li>
<li>week(date)：返回date是一年中的第几周</li>
<li>year(date)：返回date的年份</li>
<li>monthName(date)：返回date的月份名</li>
<li>hour(time)/minute(time)：返回time的小时值/分钟值</li>
<li>date_format(date,fmt)：按字符串fmt格式化日期date值</li>
<li>datediff(end,begin)：返回起始时间begin和结束时间end之间的天数</li>
<li>date_add(date,INTERVAL expr type)：返回与所给时间date相差INTERVAL时间段的值</li>
</ul>
</li>
<li>函数测试1：<pre><code>SELECT CURDATE(),CURTIME(),NOW(),WEEK(NOW());
SELECT unix_timestamp(NOW()),from_unixtime(unix_timestamp(NOW()));
SELECT YEAR(NOW()),MONTHNAME(NOW()),HOUR(NOW()),MINUTE(NOW());
</code></pre>测试结果：<br><img src="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-19.jpg" alt=""></li>
<li>最后三个函数介绍：<br><code>date_format(date,fmt)</code>时间格式化函数：<br>mysql中的日期和时间格式非常多，主要有如下：<br><img src="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-20.jpg" alt=""><br><img src="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-20-0.jpg" alt=""><br><code>date_add(date,INTERVAL expr type)</code>：返回与所给时间date相差INTERVAL时间段的值<br>如下图：<br><img src="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-21.jpg" alt=""><br>如返回1年零两个月后的时间：<pre><code>SELECT DATE_ADD(NOW(),INTERVAL 1_2 YEAR_MONTH);
</code></pre><code>datediff(expr,expr2)</code>：返回起始时间expr2和结束时间expr之间的天数</li>
<li>测试最后三个函数：<pre><code>SELECT DATE_FORMAT(NOW(),&apos;%D,%T,%Y,%M&apos;);
SELECT DATE_ADD(NOW(),INTERVAL &apos;1_2&apos; YEAR_MONTH) 1year2monthlater;
SELECT DATEDIFF(NOW(),DATE_ADD(NOW(),INTERVAL 60 DAY)) later2now,DATEDIFF(NOW(),DATE_ADD(NOW(),INTERVAL -60 DAY)) before2now;
</code></pre>测试结果：<br><img src="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-22.jpg" alt=""></li>
</ol>
<p><strong>5)流程(分支)函数(和流程控制的稍有不同)</strong></p>
<ol>
<li>在一个SQL语句中实现条件选择可以提高语句的效率。</li>
<li>常见的流程函数：<ul>
<li>if(condition,t,f)：如果condition成立返回t,不成立返回f</li>
<li>ifnull(value1,value2)：如果value1不为空返回value1否则返回value2</li>
<li><code>CASE WHEN value1 THEN [result1][when(value2)...] ELSE [default] end</code><br>满足条件value则返回result否则返回default。</li>
<li><code>CASE [expr] WHEN value1 THEN [result1][when(value2)...] ELSE [default] end</code><br>满足条件value=expr则返回result,否则返回default。</li>
</ul>
</li>
<li>测试(m_stu2表)：<pre><code>SELECT id,name,if(Height&gt;175,&apos;tall&apos;,&apos;short&apos;) FROM m_stu1; -- 返回身高175以上为高，以下为矮
SELECT id,name,(CASE height WHEN 161 THEN &apos;残疾&apos; WHEN 182 THEN &apos;完美&apos; ELSE &apos;还行&apos; END) as pingji FROM m_stu1;
</code></pre>测试结果：<br><img src="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-23.jpg" alt=""></li>
</ol>
<p><strong>6)其他函数（加密函数等）</strong></p>
<ol>
<li>其他常用的函数：<ul>
<li>DATABASE()：返回当前的数据库名</li>
<li>VERSION()：返回当前的数据库版本</li>
<li>USER()：返回当前登录用户</li>
<li>INET_ATON(IP)：返回IP地址的数字表示</li>
<li>INET_NTOA(num)：返回数字表示的IP地址</li>
<li>PASSWORD(str)：返回字符串str的加密版本，不能用来对应用数据加密</li>
<li>MD5(str)：返回str的MD5加密版本，常用于应用的数据加密</li>
</ul>
</li>
<li>函数测试：<pre><code>SELECT DATABASE(),VERSION(),USER();
SELECT INET_ATON(&apos;192.168.1.1&apos;),INET_NTOA(&apos;3232235777&apos;);
SELECT PASSWORD(&apos;123456&apos;),MD5(&apos;123456&apos;);
</code></pre>测试结果：<br><img src="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-24.jpg" alt=""></li>
<li>PASSWORD与MD5的简单区别：<br>password用于修改mysql的用户密码，如果是应用与web程序建议使用md5()函数<br>password函数旧版16位，新版41位，可用<code>select length(password(&#39;123456&#39;))</code>察看。<br>password函数加密不可逆，如果和数据库里加密后内容比较时可以采用<code>password(pwd)==字段内容</code>的方式；<br>md5函数加密后32位，此加密算法不可逆，其实md5算法是信息摘要算法，如果拿来做压缩也是有损压缩，理论上即使有反向算法也无法恢复信息原样。常被用来检验下载数据的完整性。</li>
</ol>
<hr>
<h2 id="5-自定义函数及函数的操作"><a href="#5-自定义函数及函数的操作" class="headerlink" title="5.自定义函数及函数的操作"></a>5.自定义函数及函数的操作</h2><p><strong>1)自定义函数：</strong></p>
<ol>
<li>函数的要素：<br>函数名，参数列表(形参，实参)，返回值，函数体(作用域)。</li>
<li>自定义函数与系统函数调用的方式相同。</li>
</ol>
<p><strong>2)自定义函数创建与查看：</strong></p>
<ol>
<li>创建语法：<pre><code>create function 函数名([形参列表]) returns 数据类型 
Begin 
        -- 函数体
        -- 返回值：return的类型（指定的数据类型）
        -- 只有一行时不用begin和end
End 结束表标识
</code></pre>注意设置返回值时是returns。</li>
<li>创建测试：<pre><code>CREATE FUNCTION display1() RETURNS INT return 100;
</code></pre><img src="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-25.jpg" alt=""></li>
<li>查看所有自定义函数：<pre><code>show function status[like &apos;...&apos;];
</code></pre><img src="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-26.jpg" alt=""><br>发现该数据库下共有23个函数,第一行指定了数据库，说明只有这个数据库能使用该函数。</li>
<li>查看函数的创建语句：<pre><code>show create function 函数名；
</code></pre>如：<br><img src="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-27.jpg" alt=""></li>
</ol>
<p><strong>3)函数删除及带参数的函数的创建：</strong></p>
<ol>
<li>函数无法修改，只能先删除，后新增：<pre><code>drop function 函数名;
</code></pre></li>
<li>函数的参数：<br>参数分为两种，定义时的参数–形参，使用时的参数–实参。<br>形参：必须指定数据类型。</li>
<li>带参数的函数的创建：<pre><code>delimiter $$
create function 函数名(形参名字 字段类型[...]) returns 数据类型 
Begin 
        -- 函数体
        -- 返回值：return的类型（指定的数据类型）
        -- 只有一行时不用begin和end
End $$
delimiter ;
</code></pre>如果函数体中需要使用<code>；</code>做结束标志，则需要使用<code>delimater</code>修改结束符。</li>
<li>创建测试：<br>创建一个sum1函数求1到n的和：<br>– 自定义求和函数<pre><code>delimiter $$ 
CREATE FUNCTION sum1(n INT) RETURNS INT
BEGIN
        -- 定义条件变量
        SET @sum=0;
        SET @i=1;
        -- 循环求和
        WHILE @i&lt;=n DO
                -- 求和,mysql中任何变量的修改都必须用set关键字
                -- mysql中没有+=，++等运算符
                SET @sum =@sum+@i;
                -- 修改循环变量
                SET @i=@i+1;
                -- 返回值
        END WHILE;
        RETURN @sum;
END
$$
delimiter ; 
</code></pre><img src="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-28-2.jpg" alt=""><br>带有@的变量时全局变量，不带@的函数是局部变量。</li>
<li>使用上述函数进行测试：<br><img src="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-29.jpg" alt=""></li>
</ol>
<p><strong>4)作用域：</strong></p>
<ol>
<li>在函数内部使用@定义的符号，在外部也可以使用。<br>全局变量能在任何地方使用，局部变量只能在函数内部(begin~end间)使用。</li>
<li>全局变量：<br>使用set关键字定义，并使用@符号标识：<pre><code>set @变量名=值；
</code></pre></li>
<li>局部变量：<br>使用declare关键字声明，没有@符号标识。且必须在函数体开始之前声明：<pre><code>declare 变量名1[,变量名2...] 类型 default 默认值；
</code></pre>修改局部变量的值：<pre><code>set 变量名=值；
</code></pre>也可以通过查询直接赋值：与全局变量相同。</li>
<li>测试局部变量：<br>创建一个sum1函数求1到n的和，但是5的倍数不加：<pre><code>delimiter $$ 
CREATE FUNCTION sum2(n INT) RETURNS INT
BEGIN
        -- 声明局部变量 
        DECLARE sum INT DEFAULT 0;
        DECLARE i INT DEFAULT 1;
        -- 循环求和
        oneton:WHILE i&lt;=n DO
                -- 判断如果是5的倍数跳出该次循环
                IF MOD(i,5)=0 THEN
                        SET i=i+1;
                        ITERATE oneton;
                END IF;
                -- 求和
                SET sum =sum+i;
                    -- 修改循环变量
                SET i=i+1;
        END WHILE;
        -- 返回值
        RETURN sum;
END
$$
delimiter ; 
</code></pre>创建及测试结果：<br><img src="http://p5ki4lhmo.bkt.clouddn.com/00022mysql%E5%AD%A6%E4%B9%A07-30.jpg" alt=""></li>
</ol>
<hr>
<h2 id="6-流程控制补充"><a href="#6-流程控制补充" class="headerlink" title="6.流程控制补充"></a>6.流程控制补充</h2><p>除了if,while外mysql还有一些常用的流程控制语句<br><strong>1)CASE语句：</strong></p>
<ol>
<li>case语句可以实现比if更复杂的条件结构</li>
<li>基本语法：<pre><code>CASE case_value
    WHEN value1 THEN result1[when value2 then...]
    [ELSE result];
END CASE;
</code></pre>或者：<pre><code>CASE 
    WHEN 条件1 THEN 结果1[when 条件2 then...]
    [ELSE result]
END CASE;
</code></pre></li>
</ol>
<p><strong>2)LOOP语句：</strong></p>
<ol>
<li>能实现简单的死循环。</li>
<li>一般创建形式：<pre><code>LOOP
    -- 循环体：操作
END LOOP;
</code></pre></li>
<li>如果要退出死循环需要结合if和iterate/leave操作：<pre><code>循环名字：Loop
    -- 循环体
    -- 循环控制
    Iterate/Leave 循环名字
End Loop [循环名];
</code></pre></li>
</ol>
<p><strong>3)REPEAT语句：</strong></p>
<ol>
<li>REPEAT:满足条件时退出循环，相当于<code>do while ... until</code>。</li>
<li>基本语法：<pre><code>REPEAT
    -- 循环体：操作
UNTIL 终止循环的条件
END REPEAT;
</code></pre></li>
<li>配合iterate/leave操作：<pre><code>循环名字：REPEAT
    -- 循环体
    -- 循环控制
    Iterate/Leave 循环名字
UNTIL 终止循环的条件
End REPEAT [循环名];
</code></pre>可以看出三种循环其实差不多。</li>
</ol>
<hr>

            <div class="post-copyright">
    <div class="content">
        <p>最后更新： 2018年04月05日 13:56</p>
        <p>原始链接： <a class="post-url" href="/2018/03/25/MySQL数据库学习笔记（七）/" title="MySQL学习笔记（七）：变量、触发器、函数及流程控制">https://zjxkenshine.github.io/2018/03/25/MySQL数据库学习笔记（七）/</a></p>
        <footer>
            <a href="https://zjxkenshine.github.io">
                <img src="/images/logo.png" alt="周建新">
                周建新
            </a>
        </footer>
    </div>
</div>

      
        
            
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;">赏</a>
</div>

<div id="reward" class="post-modal reward-lay">
    <a class="close" href="javascript:;" id="reward-close">×</a>
    <span class="reward-title">
        <i class="icon icon-quote-left"></i>
        请我吃糖~
        <i class="icon icon-quote-right"></i>
    </span>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/images/wechat_code.jpg" alt="打赏二维码">
        </div>
        <div class="reward-select">
            
            <label class="reward-select-item checked" data-id="wechat" data-wechat="/images/wechat_code.jpg">
                <img class="reward-select-item-wechat" src="/images/wechat.png" alt="微信">
            </label>
            
            
            <label class="reward-select-item" data-id="alipay" data-alipay="/images/alipay_code.jpg">
                <img class="reward-select-item-alipay" src="/images/alipay.png" alt="支付宝">
            </label>
            
        </div>
    </div>
</div>


        
    </div>
    <footer class="article-footer">
        
        
<div class="post-share">
    <a href="javascript:;" id="share-sub" class="post-share-fab">
        <i class="fa fa-share-alt"></i>
    </a>
    <div class="post-share-list" id="share-list">
        <ul class="share-icons">
          <li>
            <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://zjxkenshine.github.io/2018/03/25/MySQL数据库学习笔记（七）/&title=《MySQL学习笔记（七）：变量、触发器、函数及流程控制》 — 程序人生&pic=https://zjxkenshine.github.ioimages/logo.png" data-title="微博">
              <i class="fa fa-weibo"></i>
            </a>
          </li>
          <li>
            <a class="weixin share-sns" id="wxFab" href="javascript:;" data-title="微信">
              <i class="fa fa-weixin"></i>
            </a>
          </li>
          <li>
            <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://zjxkenshine.github.io/2018/03/25/MySQL数据库学习笔记（七）/&title=《MySQL学习笔记（七）：变量、触发器、函数及流程控制》 — 程序人生&source=程序人生" data-title="QQ">
              <i class="fa fa-qq"></i>
            </a>
          </li>
          <li>
            <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://zjxkenshine.github.io/2018/03/25/MySQL数据库学习笔记（七）/" data-title="Facebook">
              <i class="fa fa-facebook"></i>
            </a>
          </li>
          <li>
            <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《MySQL学习笔记（七）：变量、触发器、函数及流程控制》 — 程序人生&url=https://zjxkenshine.github.io/2018/03/25/MySQL数据库学习笔记（七）/&via=https://zjxkenshine.github.io" data-title="Twitter">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
          <li>
            <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://zjxkenshine.github.io/2018/03/25/MySQL数据库学习笔记（七）/" data-title="Google+">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        </ul>
     </div>
</div>
<div class="post-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;" id="wxShare-close">×</a>
    <p>扫一扫，分享到微信</p>
    <img src="//api.qrserver.com/v1/create-qr-code/?data=https://zjxkenshine.github.io/2018/03/25/MySQL数据库学习笔记（七）/" alt="微信分享二维码">
</div>

<div class="mask"></div>

        
        <ul class="article-footer-menu">
            
            
  <li class="article-footer-tags">
    <i class="fa fa-tags"></i>
      
    <a href="/tags/MySQL/" class="color1">MySQL</a>
      
  </li>

        </ul>
        
    </footer>
  </div>
</article>


    <aside class="post-toc-pos post-toc-top" id="post-toc">
        <nav class="post-toc-wrap">
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0-学习准备"><span class="post-toc-text">0.学习准备</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1-变量"><span class="post-toc-text">1.变量</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#2-触发器"><span class="post-toc-text">2.触发器</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#3-代码执行结构"><span class="post-toc-text">3.代码执行结构</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#4-函数及系统函数"><span class="post-toc-text">4.函数及系统函数</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#5-自定义函数及函数的操作"><span class="post-toc-text">5.自定义函数及函数的操作</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#6-流程控制补充"><span class="post-toc-text">6.流程控制补充</span></a></li></ol>
        </nav>
    </aside>
    

<nav id="article-nav">
  
    <a href="/2018/03/25/《鸟哥的Linux私房菜》笔记（七）/" id="article-nav-newer" class="article-nav-link-wrap">

      <span class="article-nav-title">
        <i class="fa fa-hand-o-left" aria-hidden="true"></i>
        
          《鸟哥的Linux私房菜》笔记（七）：正则表达式与shell script
        
      </span>
    </a>
  
  
    <a href="/2018/03/24/MySQL数据库学习笔记（六）/" id="article-nav-older" class="article-nav-link-wrap">
      <span class="article-nav-title">MySQL学习笔记（六）：视图，备份还原与事务</span>
      <i class="fa fa-hand-o-right" aria-hidden="true"></i>
    </a>
  
</nav>



    
          <div id="uyan_frame"></div>
  <script src="http://v2.uyan.cc/code/uyan.js?uid=2158265"></script>

    
</section>
        
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info" class="inner">
      
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


      <p>
        Powered by  <a href="http://hexo.io/" target="_blank">Hexo</a>
        Theme <a href="//github.com/wongminho/hexo-theme-miho" target="_blank">MiHo</a>
      &copy; 2018 周建新<br>
      </p>
    </div>
  </div>
</footer>
    <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
<script>
  var mihoConfig = {
      root: "https://zjxkenshine.github.io",
      animate: true,
      isHome: false,
      share: true,
      reward: 1
  }
</script>
<div class="sidebar">
    <div id="sidebar-search" title="Search">
        <i class="fa fa-search"></i>
    </div>
    <div id="sidebar-category" title="Categories">
        <i class="fa fa-book"></i>
    </div>
    <div id="sidebar-tag" title="Tags">
        <i class="fa fa-tags"></i>
    </div>
    <div id="sidebar-top">
        <span class="sidebar-top-icon"><i class="fa fa-angle-up"></i></span>
    </div>
</div>
<div class="sidebar-menu-box" id="sidebar-menu-box">
    <div class="sidebar-menu-box-container">
        <div id="sidebar-menu-box-categories">
            <a class="category-link" href="/categories/J2EE框架/">J2EE框架</a><a class="category-link" href="/categories/Java基础/">Java基础</a><a class="category-link" href="/categories/NoSQL/">NoSQL</a><a class="category-link" href="/categories/学习笔记/">学习笔记</a><a class="category-link" href="/categories/开发工具/">开发工具</a><a class="category-link" href="/categories/操作系统/">操作系统</a><a class="category-link" href="/categories/数据库/">数据库</a><a class="category-link" href="/categories/版本控制工具/">版本控制工具</a>
        </div>
        <div id="sidebar-menu-box-tags">
            <a href="/tags/Commons/" style="font-size: 10px;">Commons</a> <a href="/tags/Git/" style="font-size: 15.56px;">Git</a> <a href="/tags/JNDI/" style="font-size: 10px;">JNDI</a> <a href="/tags/Java/" style="font-size: 20px;">Java</a> <a href="/tags/Linux/" style="font-size: 20px;">Linux</a> <a href="/tags/Markdown/" style="font-size: 10px;">Markdown</a> <a href="/tags/Maven/" style="font-size: 12.22px;">Maven</a> <a href="/tags/MyBatis/" style="font-size: 17.78px;">MyBatis</a> <a href="/tags/MySQL/" style="font-size: 18.89px;">MySQL</a> <a href="/tags/Redis/" style="font-size: 14.44px;">Redis</a> <a href="/tags/Spring/" style="font-size: 13.33px;">Spring</a> <a href="/tags/Spring核心框架/" style="font-size: 13.33px;">Spring核心框架</a> <a href="/tags/Windows/" style="font-size: 10px;">Windows</a> <a href="/tags/多线程/" style="font-size: 16.67px;">多线程</a> <a href="/tags/类/" style="font-size: 11.11px;">类</a> <a href="/tags/连接池/" style="font-size: 10px;">连接池</a>
        </div>
    </div>
    <a href="javascript:;" class="sidebar-menu-box-close">&times;</a>
</div>
<div class="mobile-header-menu-nav" id="mobile-header-menu-nav">
    <div class="mobile-header-menu-container">
        <span class="title">Menus</span>
        <ul class="mobile-header-menu-navbar">
            
            <li>
                <a  href="/">
                    <i class="fa fa-home"></i><span>首页</span>
                </a>
            </li>
            
            <li>
                <a  href="/archives">
                    <i class="fa fa-archive"></i><span>归档</span>
                </a>
            </li>
            
            <li>
                <a target="_blank" href="/about">
                    <i class="fa fa-user"></i><span>关于</span>
                </a>
            </li>
            
        </ul>
    </div>
    <div class="mobile-header-tag-container">
        <span class="title">Tags</span>
        <div id="mobile-header-container-tags">
            <a href="/tags/Commons/" style="font-size: 10px;">Commons</a> <a href="/tags/Git/" style="font-size: 15.56px;">Git</a> <a href="/tags/JNDI/" style="font-size: 10px;">JNDI</a> <a href="/tags/Java/" style="font-size: 20px;">Java</a> <a href="/tags/Linux/" style="font-size: 20px;">Linux</a> <a href="/tags/Markdown/" style="font-size: 10px;">Markdown</a> <a href="/tags/Maven/" style="font-size: 12.22px;">Maven</a> <a href="/tags/MyBatis/" style="font-size: 17.78px;">MyBatis</a> <a href="/tags/MySQL/" style="font-size: 18.89px;">MySQL</a> <a href="/tags/Redis/" style="font-size: 14.44px;">Redis</a> <a href="/tags/Spring/" style="font-size: 13.33px;">Spring</a> <a href="/tags/Spring核心框架/" style="font-size: 13.33px;">Spring核心框架</a> <a href="/tags/Windows/" style="font-size: 10px;">Windows</a> <a href="/tags/多线程/" style="font-size: 16.67px;">多线程</a> <a href="/tags/类/" style="font-size: 11.11px;">类</a> <a href="/tags/连接池/" style="font-size: 10px;">连接池</a>
        </div>
    </div>
</div>
<div class="search-wrap">
    <span class="search-close">&times;</span>
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
            <i class="icon icon-lg icon-chevron-left"></i>
        </a>
        <input class="search-field" placeholder="Search..." id="keywords">
        <a id="search-submit" href="javascript:;">
            <i class="fa fa-search"></i>
        </a>
    <div class="search-container" id="search-container">
        <ul class="search-result" id="search-result">
        </ul>
    </div>
</div>

<div id="search-tpl">
    <li class="search-result-item">
        <a href="{url}" class="search-item-li">
            <span class="search-item-li-title" title="{title}">{title}</span>
        </a>
    </li>
</div>
<script src="/js/search.js"></script>
<script src="/js/main.js"></script>


  <script src="//cdn.bootcss.com/particles.js/2.0.0/particles.min.js"></script>
  <div id="particles"></div>
  <script src="/js/particles.js"></script>







  <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css">
  <script src="//cdn.bootcss.com/scrollReveal.js/3.0.5/scrollreveal.js"></script>
  <script src="/js/animate.js"></script>


  <script src="/js/pop-img.js"></script>
  <script>
     $(".article-entry p img").popImg();
  </script>

  </div>
</body>
</html>